<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Seletor de Cor Manual</title>
  <style>
    body {
      font-family: sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      margin-top: 30px;
    }

    #color-area {
      position: relative;
      width: 300px;
      height: 200px;
      background: linear-gradient(to right, white, red);
      border: 1px solid #aaa;
      cursor: crosshair;
    }

    #overlay {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: linear-gradient(to top, black, transparent);
    }

    #picker {
      position: absolute;
      width: 14px;
      height: 14px;
      border: 2px solid white;
      border-radius: 50%;
      box-shadow: 0 0 0 1px black;
      pointer-events: none;
      transform: translate(-50%, -50%);
    }

    #result {
      margin-top: 15px;
      font-size: 16px;
    }
  </style>
</head>
<body>

<div id="color-area">
  <div id="overlay"></div>
  <div id="picker"></div>
</div>

<div id="result">Cor selecionada: #ff0000</div>

<script>
  const area = document.getElementById('color-area');
  const picker = document.getElementById('picker');
  const result = document.getElementById('result');

  function hslToHex(h, s, l) {
    l /= 100;
    const a = s * Math.min(l, 1 - l) / 100;
    const f = n => {
      const k = (n + h / 30) % 12;
      const c = l - a * Math.max(Math.min(k - 3, 9 - k, 1), -1);
      return Math.round(255 * c).toString(16).padStart(2, '0');
    };
    return `#${f(0)}${f(8)}${f(4)}`;
  }

  function updateColor(e) {
    const rect = area.getBoundingClientRect();
    let x = e.clientX - rect.left;
    let y = e.clientY - rect.top;

    // Constrain within bounds
    x = Math.max(0, Math.min(rect.width, x));
    y = Math.max(0, Math.min(rect.height, y));

    picker.style.left = `${x}px`;
    picker.style.top = `${y}px`;

    const h = 0; // vermelho fixo
    const s = (x / rect.width) * 100;
    const l = 100 - (y / rect.height) * 100;

    const hex = hslToHex(h, s, l);
    result.textContent = `Cor selecionada: ${hex}`;
  }

  let dragging = false;

  area.addEventListener('mousedown', e => {
    dragging = true;
    updateColor(e);
  });

  area.addEventListener('mousemove', e => {
    if (dragging) updateColor(e);
  });

  window.addEventListener('mouseup', () => {
    dragging = false;
  });
</script>

</body>
</html>
